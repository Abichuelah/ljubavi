const messages = {
    sad: [
    "If you're reading this, it means something made you feel down, I wish I could be there right now to hug you tightly and look at your eyes, reminding you how amazing and special you are for me.",
    "Sometimes the world feels heavy, but you're not alone, not anymore. I choose you every day, even on the grey ones. I promise I'll never cheat on you babe, I'm trying my best to love you in the right way you deserve and make you feel I'm here for you.",
    "Take your time babe, breathe. I'm here for you, forever and ever and always. I know, sometimes not everything goes like we want, but we can fight together to make this works.",
    "You're the most important person I ever met, even when you don't feel like it. Your wife is here to hold you and I'll not let you down.",
    "Oh babe, I wish I could be there right now, it breaks my heart to know you're feeling like this, I would do anything to take away your sadness and make you feel safe and better in my arms.",
    "You mean everything to me, and when you're sad babe, a part of me breaks too. Because we are connected, you're my soulmate, and whatever make you feel down, we'll face this like a team, you're not alone babe.",
    "Even if you can't feel me, I'm there babe, holding your hand, whispering that you're not alone, and that you're loved, so deeply loved. I'll always treat you the right way you deserve to be treated.",
    "My heart belongs to you, even in the darkest moments. I'm yours and you are mine, I love you so much babe, I will always love you endlessly.",
    "I know sometimes you look at yourself and you only see what you think is wrong, maybe you used to overthink the little things, maybe you forget how perfect you are for me, just in the way you are.",
    "The way your eyes get shiny or your try to give me a false smile when you try to hide you're not okay... I notice those things. I'm in love with you and all those little things. I love all of you, even the parts you don't like, even the parts you think no one sees.",
    "If you could see yourself through my eyes, just for one second, you could understand why I love you so much and why you're my everything.",
    "I wouldn't change even one thing about you, babe. Please, don't be too hard on yourself. You're beautiful, you're mine. And I'll always love you, even when you can't love yourself."
],
    happy: [
    "Hey look who's happy today! I love that glaze when you're smiling. I'm so glad you're showing me that beautiful smiling face!",
    "Aww babe, you have no idea how beautiful you look when you're like this. But I'll tell you that you're like a little ray of sunshine to me when smiling!",
    "Babe! I'm so happy that you are feeling like this now. I want you to stop for a second, and realize you totally deserve this. Your deserve to be happy!",
    "Of course all the good things are happening to you! It's because you deserve it, because of you, because of who you are, because of what you give.",
    "Yaaay, babe! I wish I was there to hug you , to hold your cute face and tell you how worth you are, because I know that you can achieve everything that you propose yourself.",
    "Keep enjoying and shining, I'll always be here cheering you!",
    "Oh babe, you're happy, and that makes me feel happy too! I want you to fully enjoy this beautiful moment you're living. And thank you for letting me be part of your happiness.",
    "Enjoy this moment babe. Don't rush it, don't skip it. Feel it the way you like to. And when you think of me, I hope it brings you a big smile.",
    "When you're happy, the world feels just a little bit nicer.",
    "You and I share so many things, but what I want the most is to share your smiles, your laughs, those moments when you forget about everything else and just enjoy.",
    "I hope you're having a beautiful day. And if not, I hope this little letter makes it a bit better. I care about you so much. I'll never get tired of saying that.",
    "You're like my safe place, and when you're happy, everything just feels right.",
    "I want you to remember this: never feel guilty for being happy. The good things belong to you, you've earned them for being who you are and how you are, and no one can take your happiness away from you.",
    "I'll always be proud of you and in love with you, because you truly deserve it. Still smiling? Good! Stay like that, it looks perfect on you."
],
    angry: [
    "Looks like something is bothering you right now. Take a deep breath. Let it out slowly. I wish I could be there to help you calm down, hug you tightly and kiss your lips and to be the calmness for your storm.",
    "Please don't let anger take away your peace. It's okay to be mad. It's okay to feel things. Just don't stay stuck there for too long, it's not a nice place to live. If you need me, I'm here. If you want space, I understand.",
    "If you're reading this, you're feeling angry now. Breathe. Inhale. Exhale. Slowly. It's totally fine to feel like this. Don't fight your feelings, but don't let them eat you alive either. If you're mad at me, please talk to me. I'll listen. If you're mad at the world, I'll help you fight it. Whatever happens, remember we're together in this.",
    "I love you even when you're angry. You're still my favorite person. You don't have to be okie all the time. Sometimes things just piss us off, and that's valid.",
    "I want you to remember: you're stronger than whatever is making you angry right now. You can handle this. We can handle this, together, like a team.",
    "I'm here, always, whether you want to vent, yell, or just have a quiet hug. Babe, I'm not going anywhere.",
    "Oh wow, if you're reading this means that you're angry, and it's totally fine to be angry. But don't break things, don't break yourself, and please, don't break us. Take your time, breathe, punch a pillow if you have to.",
    "When you're ready, I'll be here to either talk it out or just hold you. We'll get through it. We always do.",
    "I know your brain is probably going a thousand miles per hour right now. Pause for a second. Breathe. You don't have to carry this weight by yourself. You have me. You always have me, and we're together in this. We'll solve this like a team. Let me help you, please. Talk to me.",
    "I know you might feel like exploding, like no one gets it. But I do. I get it. And I'm not going anywhere. I'm here for you babe.You don't need to have the perfect words. You don't need to fix it all now. You can just be. Be mad. Be quiet. Be you. And I'll just be here, loving you in every version, even the angry one.",
    "Babe, I just wanted you know that I'm not afraid of your storms. I'll be here with open arms always you need me. You can let it out, you can scream, you can vent. Just don't forget to come back to me when you're ready. I'm and I'll always be your safe place. Always.",
    "Please babe, don't punch yourself with harsh words. You don't deserve to be treated badly, not even by yourself. I know your anger can be loud, but I love you so much and louder. You're not alone in this. Never."
],
    lonely: [
    "If you're reading this then you're probably feeling a bit alone. I wish I could teleport to you this second and hold you tight, but I want you know that you're never really alone. Even far away, I'm always thinking of you. We can see the same moon, and now every time you see it, think that I'm also seeing it with you.",
    "Maybe life feels a bit quiet right now babe, but rememberâ€¦ silence isn't the same as being unloved. I love you so much!",
    "I know you might be feeling empty, maybe even forgotten. But you're not. You're always in my mind 24/7, and also in my heart.",
    "You matter. You're important. And I love you, more than you probably can imagine. Close your eyes, take a deep breath, and feel me there, wrapping you up like your favorite blanket. I'm here. Always. For you, babe.",
    "Sometimes it feels like no one gets you, like you're invisible. But listen to me carefully: I see you. I hear you. I care about you. You're not alone, not now, not ever. Even when we're apart, I'm holding you close in my heart.",
    "I would sit with you in silence, I would hug you without needing to say a single word, I would be the person who makes the loneliness feel a little less heavy.",
    "You're not too much. You're not a burden. You're mine, only mine. And I love you, babe. Please don't forget that.",
    "If you are reading this, probably you're feeling lonely, but somewhere out here, I'm probably thinking about you right now.",
    "Life does that sometimes, it tricks us into feeling like we're alone when we're actually surrounded by love we can't see in that moment. So let me remind you: I'm here, babe. I'm here for you. I choose you every day. I care about you and I'll love you forever and ever.",
    "Just because you feel alone doesn't mean you are. I'm here, babe. I've always been here. I'll always be here for you. Sometimes our brains can be so loud when everything else feels quiet. But you can silence those thoughts with one simple truth, you are loved! Deeply. Unconditionally. Completely. By me.",
    "Are you seriously feeling lonely? Babe, stop. Close your eyes. Did you feel that? That was me sending you a big bear hug. You're my favorite person. You could never be truly alone. I'm always closer than you think, just take your hand to your chest and feel your heart beating, there I am. Always by your side.",
    "Sometimes you can be in a room full of people and still feel lonely. I know how it feels, babe, I really know. But I don't ever want you to feel like you have to face things by yourself. Even in the quiet moments, I'm holding your hand in mine. You're my person. And I will always choose you, even when the world feels distant. I'll always be by your side in every step you take."
]
};

let currentIndex = {
    sad: 0,
    happy: 0,
    angry: 0,
    lonely: 0
};

document.querySelectorAll('.deck').forEach(deck => {
    deck.addEventListener('click', () => {
    const deckName = deck.dataset.deck;
    const index = currentIndex[deckName];
    const text = messages[deckName][index % messages[deckName].length];
    currentIndex[deckName]++;

    showCard(text);
    });
});

function showCard(text) {
    const container = document.getElementById("card-container");
    container.innerHTML = '';

    const card = document.createElement('div');
    card.className = 'card';

    const front = document.createElement('div');
    front.className = 'card-face front';

    const back = document.createElement('div');
    back.className = 'card-face back';
    back.textContent = text;

    card.appendChild(front);
    card.appendChild(back);
    container.appendChild(card);

    setTimeout(() => {
    card.classList.add('flipped');
    }, 100);

    const emojiMap = {
    sad: ["ðŸ˜¢", "ðŸ˜¢", "ðŸ˜¢", "ðŸ˜¢"],
    happy: ["ðŸ˜Š", "ðŸ˜Š", "ðŸ˜Š", "ðŸ˜Š"],
    angry: ["ðŸ˜ ", "ðŸ˜ ", "ðŸ˜ ", "ðŸ˜ "],
    lonely: ["ðŸ¥º", "ðŸ¥º", "ðŸ¥º", "ðŸ¥º"]
    };

    const deck = getCurrentDeck(text);
    const emojis = emojiMap[deck];

    emojis.forEach(() => {
    const emoji = document.createElement("div");
    emoji.className = "floating-emoji";
    emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];

    const x = `${Math.random() * 100 - 50}px`;
    const y = `${-100 - Math.random() * 80}px`;
    emoji.style.setProperty('--x', x);
    emoji.style.setProperty('--y', y);

    card.appendChild(emoji);

    setTimeout(() => {
        emoji.remove();
    }, 1300);
    });
}

function getCurrentDeck(text) {
    for (const [deck, msgs] of Object.entries(messages)) {
    if (msgs.includes(text)) return deck;
    }
    return 'happy';
}